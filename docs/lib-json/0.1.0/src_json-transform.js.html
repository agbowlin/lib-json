<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>src/json-transform.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-lib-initext.html">lib-initext</a></li><li><a href="module-lib-json.html">lib-json</a><ul class='methods'><li data-type='method'><a href="module-lib-json.html#.Clone">Clone</a></li><li data-type='method'><a href="module-lib-json.html#.FindName">FindName</a></li><li data-type='method'><a href="module-lib-json.html#.FindValue">FindValue</a></li><li data-type='method'><a href="module-lib-json.html#.GetValue">GetValue</a></li><li data-type='method'><a href="module-lib-json.html#.HasPath">HasPath</a></li><li data-type='method'><a href="module-lib-json.html#.SetValue">SetValue</a></li><li data-type='method'><a href="module-lib-json.html#~Parse">Parse</a></li></ul></li><li></li><li></li><li></li><li></li><li></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">src/json-transform.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
/**
 * @module lib-json
 */


//---------------------------------------------------------------------
exports.CalculateTransform = CalculateTransform;
exports.ApplyTransform = ApplyTransform;


//---------------------------------------------------------------------
function CalculateTransform( Node1, Node2 )
{

	//---------------------------------------------------------------------
	function calculate_transform_recurse( Node1, Node2, Path, Transform )
	{
		// Handle cases where one or another Node is undefined.
		if ( typeof Node1 === 'undefined' )
		{
			if ( typeof Node2 === 'undefined' ) { return; }
			// Value missing
			Transform.entries.push( {
				path: Path,
				type: 'value missing',
				value: Node2,
				explanation: `${typeof Node1} !== ${typeof Node2}`,
			} );
			return;
		}
		if ( typeof Node2 === 'undefined' )
		{
			// Value extraneous
			Transform.entries.push( {
				path: Path,
				type: 'value extraneous',
				value: Node2,
				explanation: `${typeof Node1} !== ${typeof Node2}`,
			} );
			return;
		}

		// Handle cases where the types of values differ.
		if ( typeof Node1 !== typeof Node2 )
		{
			// Type mismatch
			Transform.entries.push( {
				path: Path,
				type: 'type mismatch',
				value: Node2,
				explanation: `${typeof Node1} !== ${typeof Node2}`,
			} );
			return;
		}

		// Handle cases where the values differ.
		if (
			( typeof Node1 === 'boolean' )
			|| ( typeof Node1 === 'number' )
			|| ( typeof Node1 === 'bigint' )
			|| ( typeof Node1 === 'string' )
			|| ( Node1 === null )
			|| ( Node2 === null )
		)
		{
			if ( Node1 !== Node2 )
			{
				// Value mismatch
				Transform.entries.push( {
					path: Path,
					type: 'value mismatch',
					value: Node2,
					explanation: `${Node1} !== ${Node2}`,
				} );
			}
			return;
		}

		// Handle Arrays and Objects.
		if ( typeof Node1 === 'object' )
		{
			if ( Array.isArray( Node1 ) )
			{
				for ( let index = 0; index &lt; Node1.length; index++ )
				{
					calculate_transform_recurse( Node1[ index ], Node2[ index ], Path + `[${index}]`, Transform );
				}
			}
			else
			{
				let keys = Object.keys( Node1 );
				for ( let index = 0; index &lt; keys.length; index++ )
				{
					let key = keys[ index ];
					calculate_transform_recurse( Node1[ key ], Node2[ key ], Path + `.${key}`, Transform );
				}
			}
		}

		return;
	}


	//---------------------------------------------------------------------
	let transform = {
		root: '$',
		entries: [],
	};
	calculate_transform_recurse( Node1, Node2, '$', transform );
	return transform;

}


//---------------------------------------------------------------------
function ApplyTransform( Node, Transform )
{
	throw new Error( 'ApplyTransform is not implemented.' );
	return null;
}

</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Tue Jun 23 2020 00:47:52 GMT-0500 (Central Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
