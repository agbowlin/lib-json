<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>src/json-initext.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-lib-initext.html">lib-initext</a></li><li><a href="module-lib-json.html">lib-json</a><ul class='methods'><li data-type='method'><a href="module-lib-json.html#.clone">clone</a></li><li data-type='method'><a href="module-lib-json.html#.find_name">find_name</a></li><li data-type='method'><a href="module-lib-json.html#.find_value">find_value</a></li><li data-type='method'><a href="module-lib-json.html#.get_value">get_value</a></li><li data-type='method'><a href="module-lib-json.html#.has_path">has_path</a></li><li data-type='method'><a href="module-lib-json.html#.set_value">set_value</a></li><li data-type='method'><a href="module-lib-json.html#~parse">parse</a></li></ul></li><li></li><li></li><li></li><li></li><li></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">src/json-initext.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
/**
 * @module lib-initext
 */


//---------------------------------------------------------------------


//---------------------------------------------------------------------
exports.to_initext = to_initext;
exports.from_initext = from_initext;


//---------------------------------------------------------------------
function to_initext ( Data )
{
	//NOTE: This function has the following side effects:
	//		- ignores all sections that are not of type object
	//		- ignores all entry values that are not of a primitive type
	let ini_text = '';
	let section_keys = Object.keys( Data );
	for ( let section_index = 0; section_index &lt; section_keys.length; section_index++ )
	{
		let section_key = section_keys[ section_index ];
		let section_data = Data[ section_key ];
		if ( !( typeof section_data === 'object' ) ) { continue; }
		if ( Array.isArray( section_data ) ) { continue; }
		ini_text += `[${ section_key }]\n`;
		let entry_keys = Object.keys( section_data );
		for ( let entry_index = 0; entry_index &lt; entry_keys.length; entry_index++ )
		{
			let entry_key = entry_keys[ entry_index ];
			let entry_value = section_data[ entry_key ];
			if (
				( typeof entry_value === 'symbol' )
				|| ( typeof entry_value === 'function' )
				|| ( typeof entry_value === 'object' )
			)
			{
				continue;
			}
			ini_text += `${ entry_key }=${ entry_value }\n`;
		}
	}
	return ini_text;
}


//---------------------------------------------------------------------
function from_initext ( IniText )
{
	//NOTE: This function has the following side effects:
	//		- ignores all lines before the first section is found
	//		- ignores all entry lines which do not contain an '=' character
	//		- All entry values are stored as strings and no conversion is attempted
	let data = {};
	let lines = IniText.split( '\n' );
	let section_name = '';
	for ( let line_index = 0; line_index &lt; lines.length; line_index++ )
	{
		let line = lines[ line_index ];
		if ( !line ) { continue; }
		line = line.trim();
		if ( line.startsWith( '[' ) )
		{
			// New Section
			let ich = line.indexOf( ']' );
			if ( ich &lt; 0 ) { ich = line.length; }
			section_name = line.substring( 1, ich );
			section_name = section_name.trim();
			data[ section_name ] = {};
		}
		else if ( section_name )
		{
			// New Entry
			let ich = line.indexOf( '=' );
			if ( ich &lt; 0 ) { continue; }
			let entry_name = line.substring( 0, ich );
			entry_name = entry_name.trim();
			let entry_value = line.substring( ich + 1 );
			entry_value = entry_value.trim();
			data[ section_name ][ entry_name ] = entry_value;
		}
	}
	return data;
}


</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Sat Jun 13 2020 14:36:04 GMT-0500 (Central Daylight Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
